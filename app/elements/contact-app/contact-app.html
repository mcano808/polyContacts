<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../contact-chip/contact-chip.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<polymer-element name="contact-app" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
      .sectionTitle{
        font-weight: bolder;
        background-color:#1976D2;
        color: #FFF;
        padding:3px;
      }
    </style>
    <core-ajax auto
               url="../../testData.json"
               handleAs="json"
               on-core-response="{{gotData}}"></core-ajax>
    <div class="sectionTitle">Today's Calls</div>
    <template repeat="{{contact in contacts}}">
      <contact-chip first="{{contact.name.first}}" last="{{contact.name.last}}" status="{{contact.contacts[0].status}}"></contact-chip>
    </template>

  </template>
  <script>
    (function () {
      Polymer({
        // define element prototype here
        gotData: function(evt, detail){
          console.log('got test data:', arguments);
          this.contacts = detail.response.contacts;
        },
        contacts:null
      });
    })();
  </script>
</polymer-element>
